(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const R of p.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&d(R)}).observe(document,{childList:!0,subtree:!0});function _(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerPolicy&&(p.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?p.credentials="include":a.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(a){if(a.ep)return;a.ep=!0;const p=_(a);fetch(a.href,p)}})();function ee(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var U={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W;function ce(){if(W)return D;W=1;var g=Symbol.for("react.transitional.element"),w=Symbol.for("react.fragment");function _(d,a,p){var R=null;if(p!==void 0&&(R=""+p),a.key!==void 0&&(R=""+a.key),"key"in a){p={};for(var m in a)m!=="key"&&(p[m]=a[m])}else p=a;return a=p.ref,{$$typeof:g,type:d,key:R,ref:a!==void 0?a:null,props:p}}return D.Fragment=w,D.jsx=_,D.jsxs=_,D}var X;function ae(){return X||(X=1,U.exports=ce()),U.exports}var h=ae(),q={exports:{}},u={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K;function fe(){if(K)return u;K=1;var g=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),R=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),n=Symbol.for("react.suspense"),t=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),O=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var o={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function C(e,r,s){this.props=e,this.context=r,this.refs=j,this.updater=s||o}C.prototype.isReactComponent={},C.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function x(){}x.prototype=C.prototype;function $(e,r,s){this.props=e,this.context=r,this.refs=j,this.updater=s||o}var H=$.prototype=new x;H.constructor=$,S(H,C.prototype),H.isPureReactComponent=!0;var z=Array.isArray,y={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function M(e,r,s,i,f,v){return s=v.ref,{$$typeof:g,type:e,key:r,ref:s!==void 0?s:null,props:v}}function re(e,r){return M(e.type,r,void 0,void 0,void 0,e.props)}function k(e){return typeof e=="object"&&e!==null&&e.$$typeof===g}function ne(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return r[s]})}var J=/\/+/g;function I(e,r){return typeof e=="object"&&e!==null&&e.key!=null?ne(""+e.key):r.toString(36)}function F(){}function oe(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(F,F):(e.status="pending",e.then(function(r){e.status==="pending"&&(e.status="fulfilled",e.value=r)},function(r){e.status==="pending"&&(e.status="rejected",e.reason=r)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function N(e,r,s,i,f){var v=typeof e;(v==="undefined"||v==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(v){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case g:case w:c=!0;break;case l:return c=e._init,N(c(e._payload),r,s,i,f)}}if(c)return f=f(e),c=i===""?"."+I(e,0):i,z(f)?(s="",c!=null&&(s=c.replace(J,"$&/")+"/"),N(f,r,s,"",function(ue){return ue})):f!=null&&(k(f)&&(f=re(f,s+(f.key==null||e&&e.key===f.key?"":(""+f.key).replace(J,"$&/")+"/")+c)),r.push(f)),1;c=0;var A=i===""?".":i+":";if(z(e))for(var E=0;E<e.length;E++)i=e[E],v=A+I(i,E),c+=N(i,r,s,v,f);else if(E=P(e),typeof E=="function")for(e=E.call(e),E=0;!(i=e.next()).done;)i=i.value,v=A+I(i,E++),c+=N(i,r,s,v,f);else if(v==="object"){if(typeof e.then=="function")return N(oe(e),r,s,i,f);throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return c}function L(e,r,s){if(e==null)return e;var i=[],f=0;return N(e,i,"","",function(v){return r.call(s,v,f++)}),i}function se(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var B=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function ie(){}return u.Children={map:L,forEach:function(e,r,s){L(e,function(){r.apply(this,arguments)},s)},count:function(e){var r=0;return L(e,function(){r++}),r},toArray:function(e){return L(e,function(r){return r})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},u.Component=C,u.Fragment=_,u.Profiler=a,u.PureComponent=$,u.StrictMode=d,u.Suspense=n,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=y,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return y.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cloneElement=function(e,r,s){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=S({},e.props),f=e.key,v=void 0;if(r!=null)for(c in r.ref!==void 0&&(v=void 0),r.key!==void 0&&(f=""+r.key),r)!G.call(r,c)||c==="key"||c==="__self"||c==="__source"||c==="ref"&&r.ref===void 0||(i[c]=r[c]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var A=Array(c),E=0;E<c;E++)A[E]=arguments[E+2];i.children=A}return M(e.type,f,void 0,void 0,v,i)},u.createContext=function(e){return e={$$typeof:R,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:p,_context:e},e},u.createElement=function(e,r,s){var i,f={},v=null;if(r!=null)for(i in r.key!==void 0&&(v=""+r.key),r)G.call(r,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(f[i]=r[i]);var c=arguments.length-2;if(c===1)f.children=s;else if(1<c){for(var A=Array(c),E=0;E<c;E++)A[E]=arguments[E+2];f.children=A}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)f[i]===void 0&&(f[i]=c[i]);return M(e,v,void 0,void 0,null,f)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:m,render:e}},u.isValidElement=k,u.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:se}},u.memo=function(e,r){return{$$typeof:t,type:e,compare:r===void 0?null:r}},u.startTransition=function(e){var r=y.T,s={};y.T=s;try{var i=e(),f=y.S;f!==null&&f(s,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(ie,B)}catch(v){B(v)}finally{y.T=r}},u.unstable_useCacheRefresh=function(){return y.H.useCacheRefresh()},u.use=function(e){return y.H.use(e)},u.useActionState=function(e,r,s){return y.H.useActionState(e,r,s)},u.useCallback=function(e,r){return y.H.useCallback(e,r)},u.useContext=function(e){return y.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,r){return y.H.useDeferredValue(e,r)},u.useEffect=function(e,r,s){var i=y.H;if(typeof s=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,r)},u.useId=function(){return y.H.useId()},u.useImperativeHandle=function(e,r,s){return y.H.useImperativeHandle(e,r,s)},u.useInsertionEffect=function(e,r){return y.H.useInsertionEffect(e,r)},u.useLayoutEffect=function(e,r){return y.H.useLayoutEffect(e,r)},u.useMemo=function(e,r){return y.H.useMemo(e,r)},u.useOptimistic=function(e,r){return y.H.useOptimistic(e,r)},u.useReducer=function(e,r,s){return y.H.useReducer(e,r,s)},u.useRef=function(e){return y.H.useRef(e)},u.useState=function(e){return y.H.useState(e)},u.useSyncExternalStore=function(e,r,s){return y.H.useSyncExternalStore(e,r,s)},u.useTransition=function(){return y.H.useTransition()},u.version="19.1.1",u}var Q;function te(){return Q||(Q=1,q.exports=fe()),q.exports}var b=te();const le=ee(b);var Y={exports:{}},T={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z;function de(){if(Z)return T;Z=1;var g=te();function w(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(){}var d={d:{f:_,r:function(){throw Error(w(522))},D:_,C:_,L:_,m:_,X:_,S:_,M:_},p:0,findDOMNode:null},a=Symbol.for("react.portal");function p(n,t,l){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:O==null?null:""+O,children:n,containerInfo:t,implementation:l}}var R=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}return T.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,T.createPortal=function(n,t){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(w(299));return p(n,t,null,l)},T.flushSync=function(n){var t=R.T,l=d.p;try{if(R.T=null,d.p=2,n)return n()}finally{R.T=t,d.p=l,d.d.f()}},T.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,d.d.C(n,t))},T.prefetchDNS=function(n){typeof n=="string"&&d.d.D(n)},T.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var l=t.as,O=m(l,t.crossOrigin),P=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;l==="style"?d.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:O,integrity:P,fetchPriority:o}):l==="script"&&d.d.X(n,{crossOrigin:O,integrity:P,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}},T.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var l=m(t.as,t.crossOrigin);d.d.M(n,{crossOrigin:l,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&d.d.M(n)},T.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var l=t.as,O=m(l,t.crossOrigin);d.d.L(n,l,{crossOrigin:O,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}},T.preloadModule=function(n,t){if(typeof n=="string")if(t){var l=m(t.as,t.crossOrigin);d.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:l,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else d.d.m(n)},T.requestFormReset=function(n){d.d.r(n)},T.unstable_batchedUpdates=function(n,t){return n(t)},T.useFormState=function(n,t,l){return R.H.useFormState(n,t,l)},T.useFormStatus=function(){return R.H.useHostTransitionStatus()},T.version="19.1.1",T}var V;function pe(){if(V)return Y.exports;V=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(w){console.error(w)}}return g(),Y.exports=de(),Y.exports}var ye=pe();const me=ee(ye),_e=()=>{const[g,w]=b.useState([]),[_,d]=b.useState(""),[a,p]=b.useState(""),[R,m]=b.useState(""),n="http://localhost:3000";b.useEffect(()=>{t()},[]);const t=async()=>{try{const o=await fetch(`${n}/api/sessions`,{credentials:"include"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const S=await o.json();w(S),S.length>0&&d(S[0].id)}catch(o){console.error("Error fetching sessions:",o),m("Error fetching sessions. Make sure you are logged in.")}},l=async()=>{m("Collecting...");try{const[o]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!o||!_)throw new Error("Could not get tab or session ID");const S=await fetch(`${n}/api/tabs`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({session_id:_,url:o.url,title:o.title,content:""})});if(!S.ok){const j=await S.json();throw new Error(j.error||"Failed to collect tab")}m(`Tab '${o.title}' collected successfully!`),setTimeout(()=>{m("")},3e3)}catch(o){console.error("Error collecting tab:",o),m(o.message)}},O=async()=>{m("Summarizing...");try{const[o]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!o||!_)throw new Error("Could not get tab or session ID");const S=await fetch(`${n}/api/summarize`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tab_id:null,url:o.url})});if(!S.ok){const x=await S.json();throw new Error(x.error||"Failed to summarize tab")}const j=await S.json(),C=await fetch(`${n}/api/tabs`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({session_id:_,url:o.url,title:o.title,content:j.summary})});if(!C.ok){const x=await C.json();throw new Error(x.error||"Failed to update tab with summary")}m(`Tab '${o.title}' summarized and collected successfully!`),setTimeout(()=>{m("")},3e3)}catch(o){console.error("Error summarizing tab:",o),m(o.message)}},P=async()=>{if(!a.trim()){m("Please enter a name for the new session.");return}m("Creating session...");try{const o=await fetch(`${n}/api/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:a})});if(!o.ok){const j=await o.json();throw new Error(j.error||"Failed to create session")}const S=await o.json();await t(),d(S[0].id),await l()}catch(o){console.error("Error creating session:",o),m(o.message)}};return h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"header",children:[h.jsx("h1",{children:"Gugel"}),h.jsx("a",{href:"http://localhost:3000/dashboard",target:"_blank",id:"go-to-app",children:"Go to App"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"session",children:"Select Research Session:"}),h.jsx("select",{id:"session",value:_,onChange:o=>d(o.target.value),children:g.map(o=>h.jsx("option",{value:o.id,children:o.title},o.id))})]}),h.jsxs("div",{className:"button-group",children:[h.jsx("button",{onClick:l,children:"Collect Tab"}),h.jsx("button",{onClick:O,children:"Summarize"})]}),h.jsx("div",{className:"divider"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"new-session-name",children:"Or create a new session:"}),h.jsx("input",{type:"text",id:"new-session-name",placeholder:"New session name...",value:a,onChange:o=>p(o.target.value)})]}),h.jsx("button",{onClick:P,children:"Create and Collect"}),h.jsx("div",{id:"status",children:R})]})};me.render(h.jsx(le.StrictMode,{children:h.jsx(_e,{})}),document.getElementById("root"));
